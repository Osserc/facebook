<%= turbo_frame_tag comment do %>

    <%= render partial: "shared/comment_single", object: comment, as: :comment %>

    <%= counter %>
    <% counter += 1 %>

    <% if counter <= 3 %>
        <ul id="nested-list-<%= comment.id %>">
            <%= render partial: "shared/comment", :collection => comment.comments, :locals => { :counter => counter } %>
        </ul>
    <% elsif comment.comments.any? %>
        <ul id="nested-list-<%= comment.id %>">
            <%= button_to "Show more", more_comment_path(comment), params: { commentable_type: comment.model_name.human, commentable_id: comment.id } %>
        </ul>
    <% end %>

<% end %>