<%= turbo_frame_tag comment do %>

    <%= comment.author.first_name + " " + comment.author.last_name %>
    
    <%= turbo_frame_tag dom_id(comment, "body") do %>
        <%= comment.body %>
    <% end %>

    <% unless same_user?(comment.author) %>
        <%= render "shared/like_buttons", object: comment %>
    <% end %>

    <% unless !same_user?(comment.author) %>
        <%= turbo_frame_tag dom_id(comment, "edit") do %>
            <%= link_to "Edit", edit_comment_path(comment.id, commentable_type: comment.commentable.model_name.human, commentable_id: comment.commentable.id) %>
        <% end %>
    <% end %>

    <% unless !same_user?(comment.author) %>
        <%= button_to "Delete", comment_path(comment.id), method: :delete, params: { comment_id: comment.id } %>
    <% end %>

    <% unless same_user?(comment.author) %>
        <%= form_with model: Comment.new do | form | %>
        <%= form.hidden_field :commentable_type, value: comment.model_name.human %>
        <%= form.hidden_field :commentable_id, value: comment.id %>
        <%= form.text_area :body, placeholder: "Add a comment" %><br/>
        <%= form.submit "Comment"  %>
        <% end %>
    <% end %>

    <%= counter %>
    <% counter += 1 %>

    <% unless counter > 3 %>
        <ul>
            <%= render partial: 'shared/comment', :collection => comment.comments, :locals => { :counter => counter } %>
        </ul>
    <% end %>

<% end %>